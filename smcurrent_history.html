<!DOCTYPE html>
<html lang="en"> 
<head>
	
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
											<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
											<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
											<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <title>Облік майна в/c </title>
    
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="description" content="Portal - Bootstrap 5 Admin Dashboard Template For Developers">
    <meta name="author" content="Xiaoying Riley at 3rd Wave Media">    
    <link rel="shortcut icon" href="favicon.ico"> 
    
    <!-- FontAwesome JS-->
    <script defer src="assets/plugins/fontawesome/js/all.min.js"></script>
    
    <!-- App CSS -->  
    <link id="theme-style" rel="stylesheet" href="assets/css/portal.css">

</head> 

<body class="app">   	
    <header class="app-header fixed-top">	   	            
        <div class="app-header-inner">  
	        <div class="container-fluid py-2">
		        <div class="app-header-content"> 
		            <div class="row justify-content-between align-items-center">
			        
				    <div class="col-auto">
					    <a id="sidepanel-toggler" class="sidepanel-toggler d-inline-block d-xl-none" href="#">
						    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg>
					    </a>
				    </div><!--//col-->
		            <div class="search-mobile-trigger d-sm-none col">
			            <i class="search-mobile-trigger-icon fa-solid fa-magnifying-glass"></i>
			        </div><!--//col-->
		            <div class="app-search-box col">
		                <form class="app-search-form">   
							<input type="text" placeholder="Пошук" name="search" class="form-control search-input">
							<button type="submit" class="btn search-btn app-btn-primary" value="Search"><i class="fa-solid fa-magnifying-glass"></i></button> 
				        </form>
		            </div><!--//app-search-box-->
		            
		            <div class="app-utilities col-auto">
			            <div style="display:none;" class="app-utility-item app-notifications-dropdown dropdown">    
				            <a class="dropdown-toggle no-toggle-arrow" id="notifications-dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false" title="Notifications">
					            <!--//Bootstrap Icons: https://icons.getbootstrap.com/ -->
					            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-bell icon" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
  <path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2z"/>
  <path fill-rule="evenodd" d="M8 1.918l-.797.161A4.002 4.002 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4.002 4.002 0 0 0-3.203-3.92L8 1.917zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5.002 5.002 0 0 1 13 6c0 .88.32 4.2 1.22 6z"/>
</svg>
					            <span class="icon-badge">3</span>
					        </a><!--//dropdown-toggle-->
					        
					        <div class="dropdown-menu p-0" aria-labelledby="notifications-dropdown-toggle">
					            <div class="dropdown-menu-header p-3">
						            <h5 class="dropdown-menu-title mb-0">Notifications</h5>
						        </div><!--//dropdown-menu-title-->
						        <div class="dropdown-menu-content">
							       <div class="item p-3">
								        <div class="row gx-2 justify-content-between align-items-center">
									        <div class="col-auto">
										       <img class="profile-image" src="assets/images/profiles/profile-1.png" alt="">
									        </div><!--//col-->
									        <div class="col">
										        <div class="info"> 
											        <div class="desc">Amy shared a file with you. Lorem ipsum dolor sit amet, consectetur adipiscing elit. </div>
											        <div class="meta"> 2 hrs ago</div>
										        </div>
									        </div><!--//col--> 
								        </div><!--//row-->
								        <a class="link-mask" href="notifications.html"></a>
							       </div><!--//item-->
							       <div class="item p-3">
								        <div class="row gx-2 justify-content-between align-items-center">
									        <div class="col-auto">
										        <div class="app-icon-holder">
											        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-receipt" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
	  <path fill-rule="evenodd" d="M1.92.506a.5.5 0 0 1 .434.14L3 1.293l.646-.647a.5.5 0 0 1 .708 0L5 1.293l.646-.647a.5.5 0 0 1 .708 0L7 1.293l.646-.647a.5.5 0 0 1 .708 0L9 1.293l.646-.647a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .801.13l.5 1A.5.5 0 0 1 15 2v12a.5.5 0 0 1-.053.224l-.5 1a.5.5 0 0 1-.8.13L13 14.707l-.646.647a.5.5 0 0 1-.708 0L11 14.707l-.646.647a.5.5 0 0 1-.708 0L9 14.707l-.646.647a.5.5 0 0 1-.708 0L7 14.707l-.646.647a.5.5 0 0 1-.708 0L5 14.707l-.646.647a.5.5 0 0 1-.708 0L3 14.707l-.646.647a.5.5 0 0 1-.801-.13l-.5-1A.5.5 0 0 1 1 14V2a.5.5 0 0 1 .053-.224l.5-1a.5.5 0 0 1 .367-.27zm.217 1.338L2 2.118v11.764l.137.274.51-.51a.5.5 0 0 1 .707 0l.646.647.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.509.509.137-.274V2.118l-.137-.274-.51.51a.5.5 0 0 1-.707 0L12 1.707l-.646.647a.5.5 0 0 1-.708 0L10 1.707l-.646.647a.5.5 0 0 1-.708 0L8 1.707l-.646.647a.5.5 0 0 1-.708 0L6 1.707l-.646.647a.5.5 0 0 1-.708 0L4 1.707l-.646.647a.5.5 0 0 1-.708 0l-.509-.51z"/>
	  <path fill-rule="evenodd" d="M3 4.5a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5zm8-6a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5z"/>
	</svg>
										        </div>
									        </div><!--//col-->
									        <div class="col">
										        <div class="info"> 
											        <div class="desc">You have a new invoice. Proin venenatis interdum est.</div>
											        <div class="meta"> 1 day ago</div>
										        </div>
									        </div><!--//col-->
								        </div><!--//row-->
								        <a class="link-mask" href="notifications.html"></a>
							       </div><!--//item-->
							       <div class="item p-3">
								        <div class="row gx-2 justify-content-between align-items-center">
									        <div class="col-auto">
										        <div class="app-icon-holder icon-holder-mono">
											        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-bar-chart-line" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" d="M11 2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v12h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1v-3a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3h1V7a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7h1V2zm1 12h2V2h-2v12zm-3 0V7H7v7h2zm-5 0v-3H2v3h2z"/>
</svg>
										        </div>
									        </div><!--//col-->
									        <div class="col">
										        <div class="info"> 
											        <div class="desc">Your report is ready. Proin venenatis interdum est.</div>
											        <div class="meta"> 3 days ago</div>
										        </div>
									        </div><!--//col-->
								        </div><!--//row-->
								        <a class="link-mask" href="notifications.html"></a>
							       </div><!--//item-->
							       <div class="item p-3">
								        <div class="row gx-2 justify-content-between align-items-center">
									        <div class="col-auto">
										       <img class="profile-image" src="assets/images/profiles/profile-2.png" alt="">
									        </div><!--//col-->
									        <div class="col">
										        <div class="info"> 
											        <div class="desc">James sent you a new message.</div>
											        <div class="meta"> 7 days ago</div>
										        </div>
									        </div><!--//col--> 
								        </div><!--//row-->
								        <a class="link-mask" href="notifications.html"></a>
							       </div><!--//item-->
						        </div><!--//dropdown-menu-content-->
						        
						        <div class="dropdown-menu-footer p-2 text-center">
							        <a href="notifications.html">View all</a>
						        </div>
															
							</div><!--//dropdown-menu-->					        
				        </div><!--//app-utility-item-->
			           
			            
			            <div class="app-utility-item app-user-dropdown dropdown">
				            <a class="dropdown-toggle" id="user-dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false"><img src="assets/images/user.png" alt="user profile"></a>
				            <ul class="dropdown-menu" aria-labelledby="user-dropdown-toggle">
								
								<li><a class="dropdown-item" href="login.html">Вийти</a></li>
							</ul>
			            </div><!--//app-user-dropdown--> 
		            </div><!--//app-utilities-->
		        </div><!--//row-->
	            </div><!--//app-header-content-->
	        </div><!--//container-fluid-->
        </div><!--//app-header-inner-->
        <div id="app-sidepanel" class="app-sidepanel sidepanel-hidden"> 
	        <div id="sidepanel-drop" class="sidepanel-drop"></div>
	        <div class="sidepanel-inner d-flex flex-column">
		        <a href="#" id="sidepanel-close" class="sidepanel-close d-xl-none">&times;</a>
		        <div class="app-branding">
		            <a class="app-logo" href="#"><img class="logo-icon me-2" src="assets/images/app-logo.png" alt="logo"><span class="logo-text">PFPTA</span></a>
	
		        </div><!--//app-branding-->  
				<div id="menu-container"></div>

				<script>
					fetch('menu.html')
						.then(response => response.text())
						.then(data => {
							document.getElementById('menu-container').innerHTML = data;
							
							// Позначення активної сторінки
							var currentPage = window.location.href.split('/').pop();
							var menuLinks = document.querySelectorAll('#menu-container a');
				
							menuLinks.forEach(link => {
								if (link.getAttribute('href') === currentPage) {
									link.parentElement.classList.add('active');
								}
							});
						})
						.catch(error => console.error('Fetch error:', error));
				</script>
			    <div class="app-sidepanel-footer">
				    <nav class="app-nav app-nav-footer">
					    <ul class="app-menu footer-menu list-unstyled">
						    <li class="nav-item">
						        <!--//Bootstrap Icons: https://icons.getbootstrap.com/ -->
						        <a class="nav-link" href="#">
							        <span class="nav-icon">
							            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-gear" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
	  <path fill-rule="evenodd" d="M8.837 1.626c-.246-.835-1.428-.835-1.674 0l-.094.319A1.873 1.873 0 0 1 4.377 3.06l-.292-.16c-.764-.415-1.6.42-1.184 1.185l.159.292a1.873 1.873 0 0 1-1.115 2.692l-.319.094c-.835.246-.835 1.428 0 1.674l.319.094a1.873 1.873 0 0 1 1.115 2.693l-.16.291c-.415.764.42 1.6 1.185 1.184l.292-.159a1.873 1.873 0 0 1 2.692 1.116l.094.318c.246.835 1.428.835 1.674 0l.094-.319a1.873 1.873 0 0 1 2.693-1.115l.291.16c.764.415 1.6-.42 1.184-1.185l-.159-.291a1.873 1.873 0 0 1 1.116-2.693l.318-.094c.835-.246.835-1.428 0-1.674l-.319-.094a1.873 1.873 0 0 1-1.115-2.692l.16-.292c.415-.764-.42-1.6-1.185-1.184l-.291.159A1.873 1.873 0 0 1 8.93 1.945l-.094-.319zm-2.633-.283c.527-1.79 3.065-1.79 3.592 0l.094.319a.873.873 0 0 0 1.255.52l.292-.16c1.64-.892 3.434.901 2.54 2.541l-.159.292a.873.873 0 0 0 .52 1.255l.319.094c1.79.527 1.79 3.065 0 3.592l-.319.094a.873.873 0 0 0-.52 1.255l.16.292c.893 1.64-.902 3.434-2.541 2.54l-.292-.159a.873.873 0 0 0-1.255.52l-.094.319c-.527 1.79-3.065 1.79-3.592 0l-.094-.319a.873.873 0 0 0-1.255-.52l-.292.16c-1.64.893-3.433-.902-2.54-2.541l.159-.292a.873.873 0 0 0-.52-1.255l-.319-.094c-1.79-.527-1.79-3.065 0-3.592l.319-.094a.873.873 0 0 0 .52-1.255l-.16-.292c-.892-1.64.902-3.433 2.541-2.54l.292.159a.873.873 0 0 0 1.255-.52l.094-.319z"/>
	  <path fill-rule="evenodd" d="M8 5.754a2.246 2.246 0 1 0 0 4.492 2.246 2.246 0 0 0 0-4.492zM4.754 8a3.246 3.246 0 1 1 6.492 0 3.246 3.246 0 0 1-6.492 0z"/>
	</svg>
							        </span>
			                        <span class="nav-link-text">Налаштування</span>
						        </a><!--//nav-link-->
						    </li><!--//nav-item-->
						    
					    </ul><!--//footer-menu-->
				    </nav>
			    </div><!--//app-sidepanel-footer-->
	        </div><!--//sidepanel-inner-->
	    </div><!--//app-sidepanel-->
    </header><!--//app-header-->
    
    <div class="app-wrapper">
	    
	    <div class="app-content pt-3 p-md-3 p-lg-4">
		    <div class="container-xl">			    
			    <h1 style="color:orange;" class="app-page-title">Список майна історичного військовослужбовця </h1>
				<div class="app-card alert alert-dismissible shadow-sm mb-4 border-left-decoration" role="alert">
				    <div class="inner">
					    <div class="app-card-body p-3 p-lg-4">
						    <h3 class="mb-3"><p class="ms-user-current"> </p> </h3>
						    <div class="row gx-5 gy-3">
						        <div class="col-12 col-lg-9">
							        
							        <div></h3>.
									<br>
									<p class="ms-user-group"> </p>
									<p class="ms-user-rank"> </p></div>
									<div id="dataContainer"></div>
									<p class="badge bg-danger" id="ms-termination-info"></p>
<p class="badge bg-warning" id="ms-parental-leaves-info"></p>
<br>
<button style="border-color: white;" class="badge bg-secondary" id="ms-parental-leaves-leave" onclick="openCustomLeaveModal()"></button>

<div class="modal fade" id="customModalLeave" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Вийти з декрету</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <!-- Форма з 1 полем для вводу дати -->
        <form id="customLeaveForm" onsubmit="submitCustomLeaveForm(event)">
          <div class="mb-3">
            <label for="customLeaveDate" class="form-label">Дата виходу з декрету:</label>
            <input type="date" class="form-control" id="customLeaveDate" required>
          </div>
          <button type="submit" class="btn btn-primary">Підтвердити</button>
        </form>
      </div>
    </div>
  </div>
</div>

<script>
  function openCustomLeaveModal() {
    // Отримання id з URL, наприклад, ?id=5
    const urlParams = new URLSearchParams(window.location.search);
    const servicemanId = urlParams.get('id');

    // Отримання респонсу GET-запиту
    fetch(`http://3.79.104.175:5001/serviceman/${servicemanId}`)
      .then(response => response.json())
      .then(data => {
        // Заповнення значення id в атрибуті data-id модального вікна
        const customModalLeave = document.getElementById('customModalLeave');
        customModalLeave.setAttribute('data-id', data.parental_leaves[0].id);

        // Відкриття модального вікна
        const modal = new bootstrap.Modal(customModalLeave);
        modal.show();
      })
      .catch(error => {
        console.error('Помилка отримання респонсу GET-запиту:', error);
        alert('Помилка отримання даних');
      });
  }

  function submitCustomLeaveForm(event) {
    event.preventDefault();

    // Отримання значення id з атрибуту data-id модального вікна
    const leaveId = document.getElementById('customModalLeave').getAttribute('data-id');

    // Отримання значення id з URL, наприклад, ?id=5
    const urlParams = new URLSearchParams(window.location.search);
    const servicemanId = urlParams.get('id');

    // Отримання значення дати з поля вводу
    const customLeaveDate = document.getElementById('customLeaveDate').value;

    // Формування URL для PATCH-запиту
    const apiUrl = `http://3.79.104.175:5001/serviceman/${servicemanId}/paternity_leave/${leaveId}`;

    // Відправлення PATCH-запиту
    fetch(apiUrl, {
      method: 'PATCH',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        to_date: customLeaveDate,
      }),
    })
      .then(response => response.json())
      .then(data => {
        // Обробка відповіді сервера, наприклад, виведення повідомлення
        alert('Запит успішно відправлено');
        // Закриття модального вікна після успішного відправлення запиту
        const modal = new bootstrap.Modal(document.getElementById('customModalLeave'));
        modal.hide();
      })
      .catch(error => {
        console.error('Помилка відправлення PATCH-запиту:', error);
        // Обробка помилки, наприклад, виведення повідомлення про помилку
        alert('Помилка відправлення запиту');
      });
  }
</script>
									<script>
										function getQueryParam(param) {
											const urlParams = new URLSearchParams(window.location.search);
											return urlParams.get(param);
										}
									
										function formatDate(dateString) {
											if (!dateString) {
												return '';
											}
									
											const options = { day: '2-digit', month: '2-digit', year: 'numeric' };
											const formattedDate = new Date(dateString).toLocaleDateString('uk-UA', options);
											return formattedDate;
										}
									
										function fetchData() {
											const id = getQueryParam('id') || '5'; // Використовуємо 5 як значення за замовчуванням
											fetch(`http://3.79.104.175:5001/serviceman/${id}/norm`)
												.then(response => response.json())
												.then(data => {
													let output = '';
													data.forEach(item => {
														let genders = item.genders.map(gender => gender ? 'чоловіків' : 'жінок').join(', ');
														let fromDate = formatDate(item.from_date);
														let toDate = formatDate(item.to_date);
														output += `<p>${item.name}, ${item.reason}, для ${genders}, з ${fromDate}${toDate ? ', до ' + toDate : ''}</p>`;
													});
													document.getElementById('dataContainer').innerHTML = output;
												})
												.catch(error => console.error('Помилка:', error));
										}
									
										// Виконати запит при завантаженні сторінки
										window.onload = fetchData;
									</script>
							    </div><!--//col-->
								
							    </div><!--//col-->
						    </div><!--//row-->
						     </div><!--//app-card-body-->
					    
				    </div><!--//inner-->
			    </div>
				<div class="tab-content" id="orders-table-tab-content">
			        <div class="tab-pane fade show active" id="orders-all" role="tabpanel" aria-labelledby="orders-all-tab">
					    <div class="app-card app-card-orders-table shadow-sm mb-5">
						    <div class="app-card-body">
							    <div class="table-responsive">
							        <table style="" class="table app-table-hover mb-0 text-center">
										<thead>
											<tr>
												<th class="cell">Дата належності</th>
												<th class="cell">Назва одиниці</th>
												<th class="cell">Кількість</th>
												<th class="cell">Розмір</th>
												<th class="cell">Інвентарне</th>
												<th class="cell">Видача</th>
												<th class="cell">Видана</th>
											</tr>
										</thead>
										<tbody id="inventoryBody">
											<!-- Дані будуть вставлені тут -->
										</tbody>
									</table>
									
							
</div>

<script>
    // Отримуємо id з URL
    const urlParams = new URLSearchParams(window.location.search);
    const id = urlParams.get('id');

    // Функція для вставки даних у табличку
    function insertDataIntoTable(data, isIssuedItems = false) {
        const inventoryBody = document.getElementById('inventoryBody');

        data.forEach(item => {
            const row = document.createElement('tr');
            const date = item.date; // Use the date as received

            let issueButton = `<a class="btn-sm app-btn-secondary" href="#" data-toggle="modal" data-target="#myModal" onclick="setSelectedItemID(${item.item.id}, this)" data-date="${date}">Видати</a>`;

            if (isIssuedItems && item.granted) {
                issueButton = ''; // Якщо річч уже видана, кнопку "Видати" не показуємо
            }

            row.innerHTML = `
                <td>${date}</td>
                <td>${item.item.name}</td>
                <td>${item.count}</td>
                <td>${item.size || '-'}</td>
                <td class="cell"><span class="badge ${item.item.returnable ? 'bg-danger' : 'bg-success'}">${item.item.returnable ? 'Так' : 'Ні'}</span></td>
                <td>${issueButton}</td>
                <td>${isIssuedItems ? item.granted || '-' : '-'}</td>
            `;

            inventoryBody.appendChild(row);
        });
    }

    // Виконуємо перший GET-запит
    fetch(`http://3.79.104.175:5001/serviceman/${id}/norm`)
        .then(response => response.json())
        .then(data => insertDataIntoTable(data))
        .catch(error => console.error('Error:', error));

    // Виконуємо другий GET-запит
    fetch(`http://3.79.104.175:5001/serviceman/${id}/obligation`)
        .then(response => response.json())
        .then(data => insertDataIntoTable(data))
        .catch(error => console.error('Error:', error));

    // Виконуємо третій GET-запит для виданих речей
    fetch(`http://3.79.104.175:5001/serviceman/${id}`)
        .then(response => response.json())
        .then(data => {
            if (data.issues && data.issues.length > 0) {
                insertDataIntoTable(data.issues, true);
            }
        })
        .catch(error => console.error('Error:', error));
</script>
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Виберіть кількість та розмір</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                Введіть кількість
                <input type="number" style="padding:5px;" id="quantity" class="form-control">
                <br>
                <!-- Введіть розмір 
                Замініть input на select для розміру -
                <select style="padding:5px;" id="size" class="form-control"></select>
                
                </select>
                <br> -->
                <label for="granted">Дата видачі:</label>
                <input type="date" class="form-control" id="granted" required>
                <script>
                    var itemId;
                    var servicemanId;
                    var selectedDate;
                    var grantedDate; // Додаємо глобальну змінну для зберігання дати підвищення

                    function setSelectedItemID(receivedItemId, element) {
                        var url = `http://3.79.104.175:5001/item/${receivedItemId}`;
                        selectedDate = element.getAttribute('data-date');
                        console.log(selectedDate);

                        fetch(url)
                            .then(response => response.json())
                            .then(data => {
                                // Видалено код для отримання розмірів
                            })
                            .catch(error => console.error("Помилка отримання розмірів", error));

                        window.itemId = receivedItemId;
                        var urlParams = new URLSearchParams(window.location.search);
                        window.servicemanId = urlParams.get('id');
                    }

                    function addItemID() {
                        var quantity = parseInt(document.getElementById("quantity").value, 10);
                        //var size = document.getElementById("size").value;
                        var date = window.selectedDate;
                        var itemId = window.itemId;
                        var servicemanId = window.servicemanId;
                        var grantedDate = document.getElementById("granted").value; // Отримуємо значення дати підвищення

                        var url = `http://3.79.104.175:5001/history/serviceman/${servicemanId}/item/${itemId}`;

                        fetch(url, {
                            method: 'PUT',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({
                                date: date,
                                count: quantity,
                                //size: size,
                                granted: grantedDate, // Додаємо значення дати підвищення
                            }),
                        })
                            .then(response => response.json())
                            .then(data => {
                                console.log('Успішно додано:', data);
                                window.location.reload();
                            })
                            .catch(error => {
                                console.error('Помилка при додаванні:', error);
                            });
                    }
                </script>
											</div>
											<div class="modal-footer">
											
												<button type="button" class="btn btn-secondary" data-dismiss="modal">Закрити</button>
											
							
												<button type="button" class="btn app-btn-primary" onclick="addItemID(itemId)">Додати</button>

</div>
</div>
</div>
</div>
												  <script>

							document.addEventListener('DOMContentLoaded', function () {
								// Отримати ідентифікатор користувача з URL
								const urlParams = new URLSearchParams(window.location.search);
								const userId = urlParams.get('id');
							
								// Додайте умову, щоб перевірити, чи ідентифікатор не є пустим або не дорівнює null
								if (userId) {
									const userUrl = `http://3.79.104.175:5001/serviceman/${userId}`;
									const ranksUrl = 'http://3.79.104.175:5001/ranks';
							
									// Функція для виконання запиту та отримання даних
									const fetchData = (url) => {
										return fetch(url, {
											method: 'GET',
											headers: {
												'Content-Type': 'application/json',
											},
										})
										.then(response => response.json())
										.catch(error => console.error('Помилка отримання даних:', error));
									};
							
									// Отримання даних про користувача
									fetchData(userUrl)
    .then(userData => {
        console.log('Отримано дані користувача:', userData);

        // Перевірка, чи є поле "rank" в отриманих даних
        if (userData.rank) {
            // Отримання списку ранків
            fetchData(ranksUrl)
                .then(ranksData => {
                    // Пошук ранку за ID
                    const userRank = ranksData[userData.rank];

                    // Виведення результату в консоль
                    console.log('Назва ранку:', userRank);

                    // Додавання назви ранку до сторінки
                    const pageRank = document.querySelector('.ms-user-rank');
                    pageRank.textContent = `Звання: ${userRank}`;

                    // Встановлюємо інформацію про користувача в заголовок h1
                    const pageTitle = document.querySelector('.ms-user-current');
                    pageTitle.textContent = `Картка В/С: ${userData.name} ${userData.surname} ${userData.patronymic}`;

                    const pageGroup = document.querySelector('.ms-user-group');
                    pageGroup.textContent = `Група: ${userData.group}`;

                    // Перевірка, чи є дата звільнення
                    if (userData.termination_date) {
                        const terminationDate = new Date(userData.termination_date);
                        const terminationText = `Звільнений з: ${terminationDate.toLocaleDateString()}`;
                        // Додавання тексту звільнення до сторінки
						const terminationInfo = document.querySelector('#ms-termination-info');
terminationInfo.textContent = terminationText;
                    }

                    // Перевірка, чи є інформація про декрет
if (userData.parental_leaves && userData.parental_leaves.length > 0) {
    const parentalLeaves = userData.parental_leaves[0];
	const parentalLeavesText = `Декрет: з ${new Date(parentalLeaves.from_date).toLocaleDateString()} ${parentalLeaves.to_date ? `по ${new Date(parentalLeaves.to_date).toLocaleDateString()}` : ' '}`;


    // Додавання тексту декрету до сторінки
    const parentalLeavesInfo = document.querySelector('#ms-parental-leaves-info');
    parentalLeavesInfo.textContent = parentalLeavesText;

    // Додавання кнопки "Вийти з декрету"
    const leaveButton = document.querySelector('#ms-parental-leaves-leave');
    leaveButton.textContent = 'Вийти з декрету'; // Текст кнопки
}

                });
        } else {
            console.log('Користувач не має ранку.');
        }
    })
    .catch((error) => {
        console.error('Помилка при виконанні запиту:', error);
        // Додайте код для відображення повідомлення про помилку користувачу тут
    });
								} else {
									console.log('ID відсутній. Запит не відправлено.');
									// Додайте код або повідомлення про те, що ID відсутній
								}
							});
								</script> 
						        </div><!--//table-responsive-->
						       
						    </div><!--//app-card-body-->		
						</div><!--//app-card-->
						
						
			        </div><!--//tab-pane-->
			        
			      
									</table>
									
<br>
<div class="container">
	<div class="row">
	  <!-- Карта для "Відправити військовослужбовця в декрет" -->
	  <div class="col-md-6 mb-4">
		<div class="app-card alert alert-dismissible shadow-sm border-left-decoration" role="alert">
		  <div class="inner">
			<div class="app-card-body p-3 p-lg-4">
				<h6 style="color:orange">Відправити історичного військовослужбовця в декрет</h6> Натисканням на цю кнопку військовослужбовець буде звільнений.<br><br>
			  <button style="    margin-bottom: 60px;margin-top:30px;" class="btn app-btn-primary theme-btn mx-auto" type="button" data-toggle="modal" data-target="#leaveModal">
				Відправити
			  </button>
			  <br>
			  <br>
			</div>
		  </div>
		</div>
	  </div>
  
	  <!-- Форма для "Підвищити військовослужбовця" -->
	  <div class="col-md-6 mb-4">
		<form id="promotionForm">
			<div class="app-card alert alert-dismissible shadow-sm border-left-decoration" role="alert">
				<div class="inner">
					<div class="app-card-body p-3 p-lg-4">
						<h6 style="color:orange">Підвищити історичного військовослужбовця</h6>
						<div class="form-group">
							<label for="rankSelect">Оберіть звання:</label>
							<select style="min-height: 50px; max-width: 150px;" class="form-control" id="rankSelect"></select>
						</div>
						<div class="form-group">
							<label for="date">Дата підвищення:</label>
							<input type="date" class="form-control" id="date" required>
						</div>
						<button type="submit" class="btn app-btn-primary theme-btn mx-auto" type="button">Підвищити</button>
					</div>
				</div>
			</div>
		</form>
	</div>
	
	  
	  <!-- Блок для "Звільнити військовослужбовця" -->
	  <div class="col-md-6 mb-4">
		<div class="app-card alert alert-dismissible shadow-sm border-left-decoration" role="alert">
			<div class="inner">
				<div class="app-card-body p-3 p-lg-4">
					<h6 style="color:orange;">Звільнити історичного військовослужбовця</h6> Натисканням на цю кнопку військовослужбовець буде звільнений.<br>
					<button style="margin-top:30px;color:white;" class="btn btn-danger mx-auto" type="button" data-toggle="modal" data-target="#modal-leave-new">
						Звільнити
					</button>
				</div>
			</div>
		</div>
	</div>
	
	<!-- Модальне вікно -->
	<div class="modal fade" id="modal-leave-new" tabindex="-1" role="dialog" aria-labelledby="modal-leave-new-label" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="modal-leave-new-label">Підтвердження звільнення</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<form id="dismissForm">
						<div class="form-group">
							<label for="fromDateInput">Дата звільнення</label>
							<input type="date" class="form-control" id="fromDateInput" required>
						</div>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Скасувати</button>
					<button style="color:white;" type="button" class="btn btn-danger" onclick="submitDismissForm()">Підтвердити звільнення</button>
				</div>
			</div>
		</div>
	</div>
	
	<script>
    function submitDismissForm() {
        // Отримати id військовослужбовця з параметрів URL
        var urlParams = new URLSearchParams(window.location.search);
        var servicemanId = urlParams.get('id');

        // Перевірити, чи вдалося отримати id
        if (!servicemanId) {
            console.error('Не вдалося отримати id військовослужбовця з параметрів URL.');
            return;
        }

        // Отримати значення дати з модального вікна
        var fromDateInput = document.getElementById('fromDateInput');
        var fromDate = fromDateInput.value;

        // Перевірити, чи введено значення дати
        if (!fromDate) {
            console.error('Введіть значення дати.');
            return;
        }

        // Створити об'єкт з даними для відправки
        var formData = {
            from_date: fromDate
        };

        // Виконати PUT-запит за допомогою Fetch API
        fetch(`http://3.79.104.175:5001/serviceman/${servicemanId}/terminate`, {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(formData)
        })
        .then(response => {
            if (!response.ok) {
                throw new Error(`HTTP error! Status: ${response.status}`);
            }
            return response.json();
        })
        .then(data => {
            // Обробити відповідь від сервера, якщо потрібно
            console.log(data);
        })
        .catch(error => {
            // Обробити помилку, якщо вона виникла під час виконання запиту
            console.error('Fetch error:', error);
        });
    }
</script>
		  </div>
		</div>
	  </div>
	  
	</div>
</div>
  
<!-- Модальне вікно для "Відправити військовослужбовця в декрет" -->
<div class="modal fade" id="leaveModal" tabindex="-1" role="dialog" aria-labelledby="leaveModalLabel" aria-hidden="true">
	<div class="modal-dialog" role="document">
	  <div class="modal-content">
		<div class="modal-header">
		  <h5 class="modal-title" id="leaveModalLabel">Форма декретної відпустки</h5>
		  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
			<span aria-hidden="true">&times;</span>
		  </button>
		</div>
		<div class="modal-body">
		  <form id="leaveForm">
			<div class="form-group">
			  <label for="fromDate">Дата початку:</label>
			  <input type="date" class="form-control" id="fromDate" required>
			</div>
			<div class="form-group">
			  <label for="toDate">Дата закінчення:</label>
			  <input type="date" class="form-control" id="toDate" required>
			</div>
		  </form>
		</div>
		<div class="modal-footer">
		  <button type="button" class="btn btn-secondary" data-dismiss="modal">Закрити</button>
		  <button type="button" class="btn app-btn-primary" onclick="submitLeaveForm()">Відправити</button>
		</div>
	  </div>
	</div>
</div>
<script>
function submitLeaveForm() {
const fromDate = document.getElementById('fromDate').value;
const toDate = document.getElementById('toDate').value;
const urlParams = new URLSearchParams(window.location.search);
const id = urlParams.get('id');

fetch('http://3.79.104.175:5001/serviceman/' + id + '/paternity_leave', {
method: 'PUT', // або 'PUT', залежно від вашої API специфікації
headers: {
'Content-Type': 'application/json',
},
body: JSON.stringify({
from_date: fromDate,
to_date: toDate
})
})
.then(response => response.json())
.then(data => {
console.log('Success:', data);
alert('Інформація про декретну відпустку військовослужбовця успішно відправлена!');
})
.catch((error) => {
console.error('Error:', error);
alert('Помилка при відправленні даних');
});

// Закриття модального вікна
$('#leaveModal').modal('hide');
}
</script>
		
		
			<script>
				document.addEventListener('DOMContentLoaded', function () {
    const ranks = ["Рекрут", "Солдат", "Старший солдат", "Молодший сержант", "Сержант", "Старший сержант", "Головний сержант", "Штаб-сержант", "Майстер-сержант", "Старший майстер-сержант", "Головний майстер-сержант", "Курсант", "Молодший лейтенант", "Лейтенант", "Старший лейтенант", "Капітан", "Майор", "Підполковник", "Полковник", "Бригадний генерал", "Генерал-майор", "Генерал-лейтенант", "Генерал"];
    const select = document.getElementById('rankSelect');
    const dateInput = document.getElementById('date');

    ranks.forEach(function (rank, index) {
        const option = document.createElement('option');
        option.value = index;
        option.textContent = rank;
        select.appendChild(option);
    });

    document.getElementById('promotionForm').addEventListener('submit', function (e) {
        e.preventDefault();
        const selectedRank = parseInt(select.value, 10);
        const promotionDate = dateInput.value;

        if (!promotionDate) {
            alert('Будь ласка, вкажіть дату підвищення.');
            return;
        }

        const urlParams = new URLSearchParams(window.location.search);
        const id = urlParams.get('id');

        fetch('http://3.79.104.175:5001/history/serviceman/' + id + '/rank', {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ rank: selectedRank, date: promotionDate })
        })
            .then(response => response.json())
            .then(data => {
                console.log('Success:', data);
                alert('Звання військовослужбовця успішно оновлено!');
            })
            .catch((error) => {
                console.error('Error:', error);
            });
    });
});
			</script>
		</div>



<!--//table-responsive-->
								<!--<div class="app-card alert alert-dismissible shadow-sm mb-4 border-left-decoration" role="alert">
									<div class="inner">
										<div class="app-card-body p-3 p-lg-4">
											<h3 class="mb-3"> </h3>
											<div class="row gx-5 gy-3">
												<div class="app-card-body">
													Додати речове майно до військовослужбовця
													
													<form class="settings-form" id="myForm">
														<div class="mb-3">
														<br>
															<label for="item">Оберіть майно:</label>
															<select id="item" class="form-select" required></select>
														</div>
														<div class="mb-3">
														
															<label for="size">Оберіть розмір:</label>
															<input id="size" class="form-select" type="text" name="size" required></select>
														</div>
														<div class="mb-3">
														
															<label for="date">Оберіть дату видачі:</label>
															<input type="date" id="date" name="date" class="form-control" required>
														</div>
														<br>
														<button class="btn app-btn-primary w-100 theme-btn mx-auto" type="button" onclick="submitForm()">Відправити</button>
													<br>
													<p style="color:red;" class="required"></p>
													<p style="color:green;"class="success"></p>
													</form>
													
													<script>
														document.addEventListener("DOMContentLoaded", function() {
															// Отримати дані з сервера при завантаженні сторінки
															fetch('http://3.79.104.175:5001/item', {
																method: 'GET',
																headers: {
																	'Content-Type': 'application/json',
																},
															})
															.then(response => response.json())
															.then(data => {
																// Заповнити випадаючий список з отриманими даними
																const selectElement = document.getElementById('item');
																data.forEach(item => {
																	const option = document.createElement('option');
																	option.value = item.id;
																	option.text = item.name;
																	selectElement.appendChild(option);
																});
															})
															.catch(error => {
																console.error('Помилка отримання даних:', error);
															});
														});
													
														function submitForm() {
    // Отримати обране значення зі списку
    const selectedItemId = document.getElementById('item').value;

    // Отримати значення serviceman_id з параметрів URL
    const urlParams = new URLSearchParams(window.location.search);
    const servicemanId = urlParams.get('id');

    // Отримати значення дати та розміру з полів вводу
    const dateInput = document.getElementById('date');
    const sizeInput = document.getElementById('size');

    // Вибрати елементи для виведення повідомлень про помилку та успіх
    const errorElement = document.querySelector('.required');
    const successElement = document.querySelector('.success');

    // Очистити попередні повідомлення про помилку та успіх
    errorElement.textContent = '';
    successElement.textContent = '';

    // Перевірити, чи всі поля заповнені
    if (!selectedItemId || !servicemanId || !dateInput.value || !sizeInput.value) {
        // Вивести повідомлення про помилку на сторінку HTML
        errorElement.textContent = 'Будь ласка, заповніть всі поля форми.';
        return;
    }

    // Створити URL зі значеннями
    const apiUrl = `http://3.79.104.175:5001/serviceman/${servicemanId}/item/${selectedItemId}`;

    // Дані, які ви хочете відправити на сервер у форматі JSON
    const requestData = {
        date: dateInput.value,
        size: sizeInput.value,
    };

    // Відправити PUT-запит на сервер
    fetch(apiUrl, {
        method: 'PUT',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(requestData),
    })
    .then(response => {
        if (response.ok) {
            console.log('Запит вдало відправлено.');
            // Тут можна додати логіку обробки успішної відправки
            // Вивести повідомлення про успіх на сторінку HTML
            successElement.textContent = 'Запит вдало відправлено.';
        } else {
            console.error('Помилка відправки запиту:', response.statusText);
            // Тут можна додати логіку обробки помилки відправки
            // Вивести повідомлення про помилку на сторінку HTML
            errorElement.textContent = `Помилка відправки запиту: ${response.statusText}`;
        }
    })
    .catch(error => {
        console.error('Помилка відправки запиту:', error);
        // Тут можна додати логіку обробки помилки відправки
        // Вивести повідомлення про помилку на сторінку HTML
        errorElement.textContent = `Помилка відправки запиту: ${error.message}`;
    });
}

													</script>
													
													
												</div><!--//col-->
											  
												</div><!--//col-->
												
											</div><!--//row-->
											 </div><!--//app-card-body-->
										
									</div>
									
						    </div><!--//app-card-body-->	
								
						</div><!--//app-card-->
						
			        </div><!--//tab-pane-->
			
				</div><!--//tab-content-->
	    <hr>
	    <footer class="app-footer">
		    <div class="container text-center py-3">
		         <!--/* This template is free as long as you keep the footer attribution link. If you'd like to use the template without the attribution link, you can buy the commercial license via our website: themes.3rdwavemedia.com Thank you for your support. :) */-->
            <small class="copyright">Управління в ... області</small>
		       
		    </div>
	    </footer><!--//app-footer-->
	    
    </div><!--//app-wrapper-->    					

 
    <!-- Javascript -->          
    <script src="assets/plugins/popper.min.js"></script>
    <script src="assets/plugins/bootstrap/js/bootstrap.min.js"></script>  
    
    <!-- Page Specific JS -->
    <script src="assets/js/app.js"></script> 

</body>
</html> 
