<!DOCTYPE html>
<html lang="en"> 
<head>
    <title>Облік майна в/c </title>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>

    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="description" content="Portal - Bootstrap 5 Admin Dashboard Template For Developers">
    <meta name="author" content="Xiaoying Riley at 3rd Wave Media">    
    <link rel="shortcut icon" href="favicon.ico"> 
    
    <!-- FontAwesome JS-->
    <script defer src="assets/plugins/fontawesome/js/all.min.js"></script>
    
    <!-- App CSS -->  
    <link id="theme-style" rel="stylesheet" href="assets/css/portal.css">
	<!--<script>
        document.addEventListener('DOMContentLoaded', function () {
            const url = 'http://3.79.104.175:5001/norm/draft';

            fetch(url, {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json',
                },
                // No body for this example since you mentioned without parameters
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error(`Network response was not ok: ${response.status}`);
                }
                return response.json(); // Assuming the server returns JSON, adjust as needed
            })
            .then(data => {
                // Handle the response data if needed
                console.log('PUT request successful:', data);
            })
            .catch((error) => {
                console.error('Error during PUT request:', error);
                // Handle errors if needed
            });
        });
    </script> -->
</head> 

<body class="app">   	
    <header class="app-header fixed-top">	   	            
        <div class="app-header-inner">  
	        <div class="container-fluid py-2">
		        <div class="app-header-content"> 
		            <div class="row justify-content-between align-items-center">
			        
				    <div class="col-auto">
					    <a id="sidepanel-toggler" class="sidepanel-toggler d-inline-block d-xl-none" href="#">
						    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg>
					    </a>
				    </div><!--//col-->
		            <div class="search-mobile-trigger d-sm-none col">
			            <i class="search-mobile-trigger-icon fa-solid fa-magnifying-glass"></i>
			        </div><!--//col-->
		            <div class="app-search-box col">
		                <form class="app-search-form">   
							<input type="text" placeholder="Пошук..." name="search" class="form-control search-input">
							<button type="submit" class="btn search-btn btn-primary" value="Search"><i class="fa-solid fa-magnifying-glass"></i></button> 
				        </form>
		            </div><!--//app-search-box-->
		            
		            <div class="app-utilities col-auto">
			            <div style="display: none;" class="app-utility-item app-notifications-dropdown dropdown">    
				            <a class="dropdown-toggle no-toggle-arrow" id="notifications-dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false" title="Notifications">
					            <!--//Bootstrap Icons: https://icons.getbootstrap.com/ -->
					            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-bell icon" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
  <path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2z"/>
  <path fill-rule="evenodd" d="M8 1.918l-.797.161A4.002 4.002 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4.002 4.002 0 0 0-3.203-3.92L8 1.917zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5.002 5.002 0 0 1 13 6c0 .88.32 4.2 1.22 6z"/>
</svg>
					            <span class="icon-badge">3</span>
					        </a><!--//dropdown-toggle-->
					        
					        <div class="dropdown-menu p-0" aria-labelledby="notifications-dropdown-toggle">
					            <div class="dropdown-menu-header p-3">
						            <h5 class="dropdown-menu-title mb-0">Notifications</h5>
						        </div><!--//dropdown-menu-title-->
						        <div class="dropdown-menu-content">
							       <div class="item p-3">
								        <div class="row gx-2 justify-content-between align-items-center">
									        <div class="col-auto">
										       <img class="profile-image" src="assets/images/profiles/profile-1.png" alt="">
									        </div><!--//col-->
									        <div class="col">
										        <div class="info"> 
											        <div class="desc">Amy shared a file with you. Lorem ipsum dolor sit amet, consectetur adipiscing elit. </div>
											        <div class="meta"> 2 hrs ago</div>
										        </div>
									        </div><!--//col--> 
								        </div><!--//row-->
								        <a class="link-mask" href="notifications.html"></a>
							       </div><!--//item-->
							       <div class="item p-3">
								        <div class="row gx-2 justify-content-between align-items-center">
									        <div class="col-auto">
										        <div class="app-icon-holder">
											        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-receipt" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
	  <path fill-rule="evenodd" d="M1.92.506a.5.5 0 0 1 .434.14L3 1.293l.646-.647a.5.5 0 0 1 .708 0L5 1.293l.646-.647a.5.5 0 0 1 .708 0L7 1.293l.646-.647a.5.5 0 0 1 .708 0L9 1.293l.646-.647a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .801.13l.5 1A.5.5 0 0 1 15 2v12a.5.5 0 0 1-.053.224l-.5 1a.5.5 0 0 1-.8.13L13 14.707l-.646.647a.5.5 0 0 1-.708 0L11 14.707l-.646.647a.5.5 0 0 1-.708 0L9 14.707l-.646.647a.5.5 0 0 1-.708 0L7 14.707l-.646.647a.5.5 0 0 1-.708 0L5 14.707l-.646.647a.5.5 0 0 1-.708 0L3 14.707l-.646.647a.5.5 0 0 1-.801-.13l-.5-1A.5.5 0 0 1 1 14V2a.5.5 0 0 1 .053-.224l.5-1a.5.5 0 0 1 .367-.27zm.217 1.338L2 2.118v11.764l.137.274.51-.51a.5.5 0 0 1 .707 0l.646.647.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.509.509.137-.274V2.118l-.137-.274-.51.51a.5.5 0 0 1-.707 0L12 1.707l-.646.647a.5.5 0 0 1-.708 0L10 1.707l-.646.647a.5.5 0 0 1-.708 0L8 1.707l-.646.647a.5.5 0 0 1-.708 0L6 1.707l-.646.647a.5.5 0 0 1-.708 0L4 1.707l-.646.647a.5.5 0 0 1-.708 0l-.509-.51z"/>
	  <path fill-rule="evenodd" d="M3 4.5a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5zm8-6a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5z"/>
	</svg>
										        </div>
									        </div><!--//col-->
									        <div class="col">
										        <div class="info"> 
											        <div class="desc">You have a new invoice. Proin venenatis interdum est.</div>
											        <div class="meta"> 1 day ago</div>
										        </div>
									        </div><!--//col-->
								        </div><!--//row-->
								        <a class="link-mask" href="notifications.html"></a>
							       </div><!--//item-->
							       <div class="item p-3">
								        <div class="row gx-2 justify-content-between align-items-center">
									        <div class="col-auto">
										        <div class="app-icon-holder icon-holder-mono">
											        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-bar-chart-line" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" d="M11 2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v12h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1v-3a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3h1V7a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7h1V2zm1 12h2V2h-2v12zm-3 0V7H7v7h2zm-5 0v-3H2v3h2z"/>
</svg>
										        </div>
									        </div><!--//col-->
									        <div class="col">
										        <div class="info"> 
											        <div class="desc">Your report is ready. Proin venenatis interdum est.</div>
											        <div class="meta"> 3 days ago</div>
										        </div>
									        </div><!--//col-->
								        </div><!--//row-->
								        <a class="link-mask" href="notifications.html"></a>
							       </div><!--//item-->
							       <div class="item p-3">
								        <div class="row gx-2 justify-content-between align-items-center">
									        <div class="col-auto">
										       <img class="profile-image" src="assets/images/profiles/profile-2.png" alt="">
									        </div><!--//col-->
									        <div class="col">
										        <div class="info"> 
											        <div class="desc">James sent you a new message.</div>
											        <div class="meta"> 7 days ago</div>
										        </div>
									        </div><!--//col--> 
								        </div><!--//row-->
								        <a class="link-mask" href="notifications.html"></a>
							       </div><!--//item-->
						        </div><!--//dropdown-menu-content-->
						        
						        <div class="dropdown-menu-footer p-2 text-center">
							        <a href="notifications.html">View all</a>
						        </div>
															
							</div><!--//dropdown-menu-->					        
				        </div><!--//app-utility-item-->
			            
			            
			            <div class="app-utility-item app-user-dropdown dropdown">
				            <a class="dropdown-toggle" id="user-dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false"><img src="assets/images/user.png" alt="user profile"></a>
				            <ul class="dropdown-menu" aria-labelledby="user-dropdown-toggle">

								<li><a class="dropdown-item" href="login.html">Вийти</a></li>
							</ul>
			            </div><!--//app-user-dropdown--> 
		            </div><!--//app-utilities-->
		        </div><!--//row-->
	            </div><!--//app-header-content-->
	        </div><!--//container-fluid-->
        </div><!--//app-header-inner-->
        <div id="app-sidepanel" class="app-sidepanel sidepanel-hidden"> 
	        <div id="sidepanel-drop" class="sidepanel-drop"></div>
	        <div class="sidepanel-inner d-flex flex-column">
		        <a href="#" id="sidepanel-close" class="sidepanel-close d-xl-none">&times;</a>
		        <div class="app-branding">
		            <a class="app-logo" href="#"><img class="logo-icon me-2" src="assets/images/app-logo.png" alt="logo"><span class="logo-text">PFPTA</span></a>
	
		        </div><!--//app-branding-->  
			    <!-- Ваш HTML-код -->
			<div id="menu-container"></div>

			<script>
				fetch('menu.html')
					.then(response => response.text())
					.then(data => {
						document.getElementById('menu-container').innerHTML = data;
						
						// Позначення активної сторінки
						var currentPage = window.location.href.split('/').pop();
						var menuLinks = document.querySelectorAll('#menu-container a');
			
						menuLinks.forEach(link => {
							if (link.getAttribute('href') === currentPage) {
								link.parentElement.classList.add('active');
							}
						});
					})
					.catch(error => console.error('Fetch error:', error));
			</script>
				
			    <div class="app-sidepanel-footer">
				    <nav class="app-nav app-nav-footer">
					    <ul class="app-menu footer-menu list-unstyled">
						    <li class="nav-item">
						        <!--//Bootstrap Icons: https://icons.getbootstrap.com/ -->
						        <a class="nav-link" href="#">
							        <span class="nav-icon">
							            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-gear" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
	  <path fill-rule="evenodd" d="M8.837 1.626c-.246-.835-1.428-.835-1.674 0l-.094.319A1.873 1.873 0 0 1 4.377 3.06l-.292-.16c-.764-.415-1.6.42-1.184 1.185l.159.292a1.873 1.873 0 0 1-1.115 2.692l-.319.094c-.835.246-.835 1.428 0 1.674l.319.094a1.873 1.873 0 0 1 1.115 2.693l-.16.291c-.415.764.42 1.6 1.185 1.184l.292-.159a1.873 1.873 0 0 1 2.692 1.116l.094.318c.246.835 1.428.835 1.674 0l.094-.319a1.873 1.873 0 0 1 2.693-1.115l.291.16c.764.415 1.6-.42 1.184-1.185l-.159-.291a1.873 1.873 0 0 1 1.116-2.693l.318-.094c.835-.246.835-1.428 0-1.674l-.319-.094a1.873 1.873 0 0 1-1.115-2.692l.16-.292c.415-.764-.42-1.6-1.185-1.184l-.291.159A1.873 1.873 0 0 1 8.93 1.945l-.094-.319zm-2.633-.283c.527-1.79 3.065-1.79 3.592 0l.094.319a.873.873 0 0 0 1.255.52l.292-.16c1.64-.892 3.434.901 2.54 2.541l-.159.292a.873.873 0 0 0 .52 1.255l.319.094c1.79.527 1.79 3.065 0 3.592l-.319.094a.873.873 0 0 0-.52 1.255l.16.292c.893 1.64-.902 3.434-2.541 2.54l-.292-.159a.873.873 0 0 0-1.255.52l-.094.319c-.527 1.79-3.065 1.79-3.592 0l-.094-.319a.873.873 0 0 0-1.255-.52l-.292.16c-1.64.893-3.433-.902-2.54-2.541l.159-.292a.873.873 0 0 0-.52-1.255l-.319-.094c-1.79-.527-1.79-3.065 0-3.592l.319-.094a.873.873 0 0 0 .52-1.255l-.16-.292c-.892-1.64.902-3.433 2.541-2.54l.292.159a.873.873 0 0 0 1.255-.52l.094-.319z"/>
	  <path fill-rule="evenodd" d="M8 5.754a2.246 2.246 0 1 0 0 4.492 2.246 2.246 0 0 0 0-4.492zM4.754 8a3.246 3.246 0 1 1 6.492 0 3.246 3.246 0 0 1-6.492 0z"/>
	</svg>
							        </span>
			                        <span class="nav-link-text">Налаштування</span>
						        </a><!--//nav-link-->
						    </li><!--//nav-item-->
						    
					    </ul><!--//footer-menu-->
				    </nav>
			    </div><!--//app-sidepanel-footer-->
	        </div><!--//sidepanel-inner-->
	    </div><!--//app-sidepanel-->
    </header><!--//app-header-->
    
    <div class="app-wrapper">
	    
	    <div class="app-content pt-3 p-md-3 p-lg-4">
		    <div class="container-xl">			    
				<h1 class="app-page-title" id="normTitle">Норма військовослужбовця:</h1>
				<h4 class="section-title" style="font-size:17px;" id="userInfo">стать: невідомо, звання: невідомо, період: невідомо</h4>
				<h4 class="section-title" style="font-size:17px;" id="reasonTitle"></h1>

			    <hr class="mb-4">
                
							
				<div class="app-card-body" id="groupContainer">
					<div class="table-responsive">
						<script>
							// Отримання параметра id з URL
							const urlParams = new URLSearchParams(window.location.search);
							const id = urlParams.get('id');
						
							// URL для гет-запиту
							const apiUrl = `http://3.79.104.175:5001/norm/${id}`;
						
							// Виконання гет-запиту
							fetch(apiUrl)
								.then(response => response.json())
								.then(data => {
									// Отримання контейнера для інформації про норму
									const normTitle = document.getElementById('normTitle');
									const reasonTitle = document.getElementById('reasonTitle');
									// Оновлення текстового вмісту з назвою норми
									normTitle.innerText = `Норма військовослужбовця: ${data.name}`;
									reasonTitle.innerText = `підстава: ${data.reason}`;
									// Отримання контейнера для інформації про користувача
									const userInfo = document.getElementById('userInfo');
						
									// Визначення статі на основі гендера
									const mapBooleanToName = bool => (bool ? 'чоловіча' : 'жіноча');
									const genderText = data.genders.map(mapBooleanToName).join(', ');
						
									// Оновлення текстового вмісту з отриманими даними
									const ranksApiUrl = 'http://3.79.104.175:5001/ranks';
						
									// Виконання гет-запиту для отримання списку рангів
									fetch(ranksApiUrl)
										.then(response => response.json())
										.then(ranks => {
											const fromRankText = getRankText(data.from_rank, ranks);
											const toRankText = getRankText(data.to_rank, ranks);
						
											// Форматування дат from_date та to_date
											const formattedFromDate = formatDate(data.from_date);
											const formattedToDate = data.to_date ? formatDate(data.to_date) : '';
						
											userInfo.innerText = `стать: ${genderText}, звання: ${fromRankText} до ${toRankText}, період: з ${formattedFromDate} ${formattedToDate ? 'до ' + formattedToDate : ''}`;
										});
						
									// Отримання контейнера для груп
									const groupContainer = document.getElementById('groupContainer');
						
									// Цикл по групам
									data.obligations.forEach(item => {
										// Перевірка, чи існує вже контейнер для групи
										let groupDiv = document.getElementById(`group${item.group}`);
										if (!groupDiv) {
											// Створення нового контейнера для групи
											groupDiv = document.createElement('div');
											groupDiv.id = `group${item.group}`;
											groupDiv.className = 'table-responsive';
											groupDiv.innerHTML = `<br><h3>${item.group}</h3><table class="table app-table-hover mb-0 text-left"><thead><tr><th class="cell">Назва речі</th><th class="cell">Кількість</th><th class="cell">Строк носіння</th><th class="cell">Інвентарне</th></tr></thead><tbody></tbody></table>`;
											groupContainer.appendChild(groupDiv);
										}
						
										// Отримання таблиці для поточної групи
										const table = groupDiv.getElementsByTagName('tbody')[0];
						
										// Додавання рядка з даними в таблицю
										const row = table.insertRow();
										const cell1 = row.insertCell(0);
										const cell2 = row.insertCell(1);
										const cell3 = row.insertCell(2);
										const cell4 = row.insertCell(3);
						
										cell1.innerHTML = item.item.name;    // Назва речі
										cell2.innerHTML = item.count;        // Кількість
										cell3.innerHTML = parseFloat((item.term / 365.24).toFixed(1));



 // Поділити term на 365 та обмежити до двох знаків після коми
										// Строк носіння
										cell4.innerHTML = item.item.returnable ? 'Так' : 'Ні'; // Інвентарне
									});
								})
								.catch(error => console.error('Помилка:', error));
						
							// Функція для отримання текстового вигляду рангу з числового значення
							function getRankText(rankNumber, ranks) {
								// ranks - це масив рангів, який ви отримали з сервера
								const rankText = ranks[rankNumber]; // Звернення до індексу напряму, оскільки ранги починаються з 0
								return rankText || `Unknown Rank (${rankNumber})`;
							}
						
							// Функція для форматування дати в потрібний вигляд (DD.MM.YYYY)
							function formatDate(dateString) {
								const date = new Date(dateString);
								const day = ('0' + date.getDate()).slice(-2);
								const month = ('0' + (date.getMonth() + 1)).slice(-2);
								const year = date.getFullYear();
								return `${day}.${month}.${year}`;
							}
						</script>
						
					</div><!--//table-responsive-->
				   
				</div>
				<br>
				<!--//table-responsive-->
					<!-- Додайте кнопку "Зберегти групу" -->
<div class="container mt-5">
    <input type="text" id="groupName" class="form-control mb-2" placeholder="Введіть ім'я групи">
    <button type="button" class="btn app-btn-primary mb-2" onclick="addNewGroup()">Додати нову групу</button>

    <!-- Додайте інпут для введення імені групи -->

	<form id="myForm" style="display: none;">
		<table class="table">
			<thead>
				<tr>
					<th scope="col">Назва речі</th>
					<th scope="col">Кількість</th>
					<th scope="col">Строк носіння</th>
				</tr>
			</thead>
			<tbody id="tableBody">
				<!-- Тут будуть додаватися рядки для речей -->
			</tbody>
		</table>
	
		<div class="row">
			<div class="col">
				<button type="button" class="btn app-btn-primary" onclick="addRow()">Додати річ</button>
			</div>
			<div class="col text-right">
				<button type="button" class="btn btn-success" onclick="saveTable()">Зберегти групу</button>

			</div>
		</div>
	</form>
	
	<!-- JavaScript код -->
	<script>
		function addNewGroup() {
			var groupName = document.getElementById('groupName').value;
			if (groupName.trim() !== '') {
				document.getElementById('myForm').style.display = 'block';
			} else {
				alert('Будь ласка, введіть ім\'я групи.');
			}
		}
	
		function addRow() {
    var tableBody = document.getElementById('tableBody');
    var newRow = tableBody.insertRow();
    var cells = [];

    // Додати селектор в першу колонку
    cells[0] = newRow.insertCell(0);
    var select = createItemSelector();
    cells[0].appendChild(select);

    // Додати числове поле в другу колонку для кількості
    cells[1] = newRow.insertCell(1);
    var quantityInput = document.createElement('input');
    quantityInput.type = 'number';
    quantityInput.className = 'form-control';
    cells[1].appendChild(quantityInput);

    // Додати числове поле в третю колонку для строки носіння
    cells[2] = newRow.insertCell(2);
    var durationInput = document.createElement('input');
    durationInput.type = 'number';
    durationInput.className = 'form-control';
    cells[2].appendChild(durationInput);
}
	
		function createItemSelector() {
			var select = document.createElement('select');
			select.className = 'form-control';
	
			// Завантажити дані для селектора з сервера
			var xhr = new XMLHttpRequest();
			xhr.open('GET', 'http://3.79.104.175:5001/item', false);  // Синхронний запит (для простоти)
			xhr.onreadystatechange = function () {
				if (xhr.readyState === 4 && xhr.status === 200) {
					var items = JSON.parse(xhr.responseText);
					for (var i = 0; i < items.length; i++) {
						var option = document.createElement('option');
						option.value = items[i].id;
						option.text = items[i].name;
						select.appendChild(option);
					}
				}
			};
			xhr.send();
	
			return select;
		}
		function saveTable() {
    var groupName = document.getElementById('groupName').value;
    var normId = getParameterByName('id');  // Отримати параметр з URL

    if (groupName.trim() === '') {
        alert('Будь ласка, введіть ім\'я групи.');
        return;
    }

    var tableBody = document.getElementById('tableBody');
    var rows = tableBody.getElementsByTagName('tr');
    var data = { "name": groupName, "items": [] }; // Зміни в структурі даних

    for (var i = 0; i < rows.length; i++) {
        var cells = Array.from(rows[i].getElementsByTagName('select')).concat(Array.from(rows[i].getElementsByTagName('input')));
        var item = {
            "item_id": parseInt(cells[0].value, 10),  // Перетворення в ціле число
            "count": parseInt(cells[1].value, 10),    // Перетворення в ціле число
            "term": parseFloat(cells[2].value) * 365.24 
        };
        data.items.push(item);
    }

    // Відправити дані на сервер
    var xhr = new XMLHttpRequest();
    xhr.open('PUT', 'http://3.79.104.175:5001/norm/' + normId + '/group', true);
    xhr.setRequestHeader('Content-Type', 'application/json');
    xhr.onreadystatechange = function () {
        if (xhr.readyState === 4) {
            if (xhr.status === 200) {
                console.log('Дані успішно відправлені:', xhr.responseText);
                
                // Перезавантажити сторінку після успішної відправки
                window.location.reload();
            } else {
				window.location.reload()
                console.error('Помилка відправлення даних на сервер:', xhr.status, xhr.statusText);
				//window.location.reload();
            }
        }
    };
    xhr.send(JSON.stringify(data));

    // Приховати форму та відобразити кнопку "Додати нову групу"
    document.getElementById('myForm').style.display = 'none';
    document.getElementById('groupName').value = ''; // Очистити поле введення імені групи
}
// Функція для отримання значення параметра з URL
function getParameterByName(name) {
    name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
    var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
    var results = regex.exec(location.search);
    return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
}
	</script>

				</div>
				<br>
				
				<br><br>
				<!-- Кнопка для відкриття попапа -->
<button type="button" class="btn btn-danger" data-toggle="modal" data-target="#confirmationModal">
    Затвердити норму
</button>

<!-- Модальне вікно для підтвердження -->
<div class="modal" id="confirmationModal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Підтвердження</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>Ви впевнені, що хочете затвердити норму?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Ні</button>
                <button type="button" class="btn btn-danger" onclick="confirmNorm()">Так</button>
            </div>
        </div>
    </div>
</div>

<script>
    function confirmNorm() {
        // Тут можна додати код для підтвердження норми
        alert('Норма затверджена!');
        // Закриваємо модальне вікно
        $('#confirmationModal').modal('hide');
    }
</script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.2/dist/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

	                </div>
					
                </div><!--//row-->
			    <hr class="my-4">
				
		    </div><!--//container-fluid-->
	    </div><!--//app-content-->
	    
	    <footer class="app-footer">
		    <div class="container text-center py-3">
		         <!--/* This template is free as long as you keep the footer attribution link. If you'd like to use the template without the attribution link, you can buy the commercial license via our website: themes.3rdwavemedia.com Thank you for your support. :) */-->
            <small class="copyright">Управління ... області</small>
		       
		    </div>
	    </footer><!--//app-footer-->
	    
    </div><!--//app-wrapper-->    					

 
    <!-- Javascript -->          
    <script src="assets/plugins/popper.min.js"></script>
    <script src="assets/plugins/bootstrap/js/bootstrap.min.js"></script>  
    
    <!-- Page Specific JS -->
    <script src="assets/js/app.js"></script> 

</body>
</html> 

